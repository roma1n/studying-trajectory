# Studying trajectory

## Условие задачи

Мы надеемся, вы уже знакомы с таблицей курсов нашей кафедры:
https://docs.google.com/spreadsheets/d/15kJrFz0QVKMJYwpLtcIar7DG7V02EoRDYyYutKnnudc/edit#gid=615482154. 


Если вкратце: курсы бывают нескольких уровней, от 0 до 5 включительно. Прежде чем закрыть курс, нужно закрыть его зависимости.  Например, чтобы закрыть курс “Архитектура.2” 4 уровня, надо закрыть курс “Архитектура.1” 3 уровня.

Представьте, что студент хочет закрыть конкретный курс 5 уровня, а также три конкретных курса 3 уровня (возможно, они входят в зависимости для курса 5 уровня, возможно, нет). Кроме того, студент имеет чёткое понимание, какие курсы 2 уровня ему нравятся больше (это выражено в том, что каждому курсу соответствует число от 1 до 21, чем число больше -- тем выше приоритет у курса). Также имеется ограничение на минимальную нагрузку. 

Напишите программу, которая получает на вход:

- Приоритеты для курсов 2-го уровня.

- Выбранные курсы 3-го и 5-го уровней.

- Минимальное число курсов, которое нужно закрыть.

Программа должна вывести список курсов, которые следует выбрать. Они должны удовлетворять описанными выше условиям, кроме того, их количество должно быть как можно меньшим. Если таких наборов несколько, выведите тот, который имеет наибольшую сумму приоритетов. 

Важно: иногда в зависимостях предлагается выбор. Например, чтобы закрыть “Тестирование”, надо закрыть  “C++.1” ИЛИ “Java.1”. 

Входные и выходные данные представляйте в удобном для вас формате.

## Решение

Простое решение: полный перебор вариантов (для каждого курса изучать его или нет). 
Проблема: низкая эффективность.

Улучшим это решение.

Пусть n -- количество курсов, n_i -- количество курсов уровня i.

Зависимости курсов образуют ациклический граф.
В траекторию обучения добавим выбранные курсы третьего и пятого уровней, все их зависимости, зависимости зависимостей и так далее рекурсивно.

Это осуществимо за O(n).

Далее, вычислим, сколько курсов уровня 3 и уровня 4 осталось изучить.
Всего осталось изучить не более 2 курсов уровня 3 (изначально было 5, 3 уже изучено) и не более 2 уровня 4 (изначально было 3, хотябы один необходим для изучения курса уровня 5, значит он уже изучен).
Переберем все возможные комбинации и выберем из них минимальную по количеству курсов и максимальную по сумме приоритетов курсов.

Эта часть работает за O(n_3^2 * n_4^2)

Понятно, что далее не выгодно брать курсы уровня выше 2, так как интересные курсы есть только среди курсов 2 уровня, а их зависимости -- ниже.
Вычислим сколько всего курсов осталось изучить. 
Далее, осуществим полные перебор с целью поиска наименьшего набора курсов наибольшего суммарного приоритета.

Эта часть работает за O((n_2 + n_1 + n_0)^(кол-во оставшихся курсов)).
Из дерева зависимостей видно, что на предыдущих этапах мы уже изучили достаточно много курсов, поэтому экспонента здесь в неслишком большой степени (для точной оценки необходимо произвести расчеты).

Последнюю часть можно оптимизировать: брать предметы жадным образом (с наибольшим приоритетом и их зависимости), но тогда тереяется гарантия получения лучшего ответа.

## Формат входных данных

Курсы пронумерованны от 0 до n, где n -- количество курсов.
